<script setup>
import { onMounted, ref } from "vue";
import WhatsAppLogo from "@/assets/img/whatsApp.ico";
import Map from "@/components/map.vue";

const city = ref("–•–∞–±–∞—Ä–æ–≤—Å–∫"); // –¢–µ–∫—É—â–∏–π –≥–æ—Ä–æ–¥
const address = ref([135.07419, 48.486327]);
const zoom = ref(15);
const isMobile = ref(window.innerWidth <= 896);

function switchMobileZoom() {
  isMobile.value = window.innerWidth <= 896;
  zoom.value = isMobile.value ? 13 : 15;
}
function switchCity() {
  city.value = city.value === "–•–∞–±–∞—Ä–æ–≤—Å–∫" ? "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫" : "–•–∞–±–∞—Ä–æ–≤—Å–∫";
  if (city.value === "–•–∞–±–∞—Ä–æ–≤—Å–∫") {
    address.value = [135.07419, 48.486327];
    zoom.value = 15;
  } else {
    address.value = [131.882552, 43.118473];
    zoom.value = 17;
  }
}

onMounted(() => {
  switchMobileZoom();
  window.addEventListener("resize", switchMobileZoom);
});
</script>

<template>
  <div class="grid grid-cols-2 my-20 max-lg:grid-cols-1">
    <Map class="" :city="address" :zoom="zoom" />
    <div class="p-5 flex flex-col">
      <div>
        <nav class="relative flex gap-5">
          <button
            class="text-2xl link transition-all duration-300 ease-in-out"
            :class="{ link_active: city === '–•–∞–±–∞—Ä–æ–≤—Å–∫' }"
            @click="switchCity"
          >
            –•–∞–±–∞—Ä–æ–≤—Å–∫
          </button>
          <button
            class="text-2xl link2 transition-all duration-300 ease-in-out"
            :class="{ link_active: city === '–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫' }"
            @click="switchCity"
          >
            –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫
          </button>
        </nav>
      </div>
      <div>
        <h2 class="text-3xl font-bold">–ù–∞—à–∏ –º–∞–≥–∞–∑–∏–Ω—ã</h2>
        <transition name="fade" mode="out-in">
          <div v-if="city === '–•–∞–±–∞—Ä–æ–≤—Å–∫'" class="grid grid-rows-2">
            <p class="shop">–¢–¶ "–ù–∞ –ü—É—à–∫–∏–Ω–∞" (10:00 - 21:00)</p>
            <p class="shop">–£–ª. –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞, 61 (10:00 - 20:00)</p>
          </div>
          <div v-else class="grid grid-rows-2">
            <p class="shop">–£–ª. –°–µ–º—ë–Ω–æ–≤—Å–∫–∞—è, 12 (10:00 - 19:00)</p>
            <div />
          </div>
        </transition>
        <h2 class="text-3xl font-bold">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h2>
        <ul class="pl-5">
          <h3 class="text-2xl font-bold">–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏:</h3>
          <li class="flex gap-2 items-end">
            <p class="text-xl">üöö</p>
            <p>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 3000 —Ä—É–±–ª–µ–π</p>
          </li>
          <li class="flex gap-2 items-end">
            <p class="text-xl">‚è≥</p>
            <p>–°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏: 2-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π</p>
          </li>
        </ul>
        <ul class="pl-5">
          <h3 class="text-2xl font-bold">–ú–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏:</h3>
          <li class="flex gap-2 items-end">
            <p class="text-xl">üöö</p>
            <p>–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</p>
          </li>
          <li class="flex gap-2 items-end">
            <p class="text-xl">üì¶</p>
            <p>–°–∞–º–æ–≤—ã–≤–æ–∑</p>
          </li>
          <li class="flex gap-2 items-end">
            <p class="text-xl">‚úâÔ∏è</p>
            <p>–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏</p>
          </li>
          <li class="flex gap-2 items-end">
            <p class="text-xl">‚ö°</p>
            <p>–≠–∫—Å–ø—Ä–µ—Å—Å-–¥–æ—Å—Ç–∞–≤–∫–∞: –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≥–æ—Ä–æ–¥–∞</p>
          </li>
        </ul>
        <ul class="pl-5">
          <h3 class="text-2xl font-bold">–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏:</h3>
          <li class="flex gap-2 items-end">
            <p class="text-xl">üìû</p>
            <a href="tel:+79098201555">+7 909 802-15-55</a>
          </li>
          <li class="flex gap-2 items-end">
            <p class="text-xl w-6"><img :src="WhatsAppLogo" alt="" /></p>
            <a
              href="https://wa.me/79098201555?text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ,%20—è%20—Ö–æ—á—É%20—É–∑–Ω–∞—Ç—å%20–æ%20–≤–∞—à–∏—Ö%20—É—Å–ª—É–≥–∞—Ö"
              target="_blank"
              class="flex gap-2 items-end"
            >
              <p>–°–≤—è–∑–∞—Ç—å—Å—è –≤ WhatsApp</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>

<style scoped>
.link {
  text-decoration: none;
  background-image: linear-gradient(currentColor, currentColor);
  background-position: 100% 100%;
  background-repeat: no-repeat;
  background-size: 0% 2px;
  transition: background-size 0.3s;
}

.link2 {
  text-decoration: none;
  background-image: linear-gradient(currentColor, currentColor);
  background-position: 0% 100%;
  background-repeat: no-repeat;
  background-size: 0% 2px;
  transition: background-size 0.3s;
}

.link_active {
  background-size: 100% 2px;
}

.fade-enter-active {
  transition: opacity 0.5s ease, transform 0.5s ease;
  opacity: 1;
  transform: translateX(0);
}

.fade-enter {
  opacity: 0;
  transform: translateX(20px);
}

.fade-leave-active {
  transition: opacity 0.5s ease, transform 0.5s ease;
  opacity: 0;
  transform: translateX(-20px);
}

.fade-leave-to {
  opacity: 0;
  transform: translateX(-20px);
}
</style>
